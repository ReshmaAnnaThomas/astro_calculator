<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Angular Distance Calculator</title>
  <script src="https://cdn.jsdelivr.net/pyodide/v0.25.1/full/pyodide.js"></script>
  <style>
    body { font-family: sans-serif; padding: 2rem; background: #f4f4f4; }
    label, input { display: block; margin: 0.5rem 0; }
    #output { margin-top: 1rem; font-weight: bold; }
  </style>
</head>
<body>
  <h1>Angular Distance Calculator</h1>
  <label>RA1 (hh:mm:ss or degrees): <input id="ra1" /></label>
  <label>DEC1 (dd:mm:ss or degrees): <input id="dec1" /></label>
  <label>RA2 (hh:mm:ss or degrees): <input id="ra2" /></label>
  <label>DEC2 (dd:mm:ss or degrees): <input id="dec2" /></label>
  <button onclick="calculate()">Calculate Angular Distance</button>
  <div id="output">Loading Python...</div>

  <script>
    let pyodideReady = false;

    async function loadPyodideAndPackages() {
      const pyodide = await loadPyodide();
      await pyodide.loadPackage("astropy");
      window.pyodide = pyodide;
      pyodideReady = true;
      document.getElementById("output").textContent = "Ready.";
    }

    async function calculate() {
      if (!pyodideReady) return;

      const ra1 = document.getElementById("ra1").value;
      const dec1 = document.getElementById("dec1").value;
      const ra2 = document.getElementById("ra2").value;
      const dec2 = document.getElementById("dec2").value;

      const code = `
from astropy.coordinates import SkyCoord
from astropy import units as u
c1 = SkyCoord("${ra1}", "${dec1}", unit=(u.hourangle, u.deg))
c2 = SkyCoord("${ra2}", "${dec2}", unit=(u.hourangle, u.deg))
sep = c1.separation(c2)
sep.deg
      `;

      try {
        const result = await pyodide.runPythonAsync(code);
        document.getElementById("output").textContent = \`Angular Distance: \${result.toFixed(6)} degrees\`;
      } catch (e) {
        document.getElementById("output").textContent = "Error: " + e;
      }
    }

    loadPyodideAndPackages();
  </script>
</body>
</html>

